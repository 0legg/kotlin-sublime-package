{   "name": "Kotlin",
    "scopeName": "source.Kotlin",
    "fileTypes": ["kt", "jetl", "jet"],
    "patterns": [
        {
            "include": "#comments"
        },
        {
            "captures": {
                "1": {
                    "name": "keyword.other.kotlin"
                }, 
                "2": {
                    "name": "entity.name.package.kotlin"
                }
            }, 
            "match": "^\\s*(package)\\b(?:\\s*([^ ;$]+)\\s*)?"
        },
        {
            "include": "#imports"
        },
        {
            "include": "#classes"
        },
        {
            "include": "#functions"
        },
        {
            "include": "#variables"
        },
        {
            "include": "#expressions"
        }
    ],
    "repository": {
        "comments": {
            "patterns": [
                {
                    "begin": "/\\*", 
                    "captures": {
                        "0": {
                            "name": "punctuation.definition.comment.kotlin"
                        }
                    }, 
                    "end": "\\*/", 
                    "name": "comment.block.kotlin"
                }, 
                {
                    "captures": {
                        "1": {
                            "name": "comment.line.double-slash.kotlin"
                        }, 
                        "2": {
                            "name": "punctuation.definition.comment.kotlin"
                        }
                    }, 
                    "match": "\\s*((//).*$\\n?)"
                }
            ]
        },
        "imports": {
            "patterns": [
                {
                    "captures": {
                        "1": {
                            "name": "keyword.other.kotlin"
                        },
                        "2": {
                            "name": "keyword.other.kotlin"
                        }
                },
                "match": "^\\s*(import)\\s+[^ $]+\\s+(as)?"
                }
            ]
        },
        "scope-modifiers": {
            "patterns": [
                {
                    "match": "\\b(public|private|protected)\\b",
                    "name": "storage.modifier.kotlin"
                }
            ]
        },
        "class-modifiers": {
            "patterns": [
                {
                    "match": "\\b(abstract|final|enum|open|attribute|annotation)\\b",
                    "name": "storage.modifier.kotlin"
                }
             ]
        },
        "function-modifiers": {
            "patterns": [
                {
                    "match": "\\b(abstract|final|open|override|inline)\\b",
                    "name": "storage.modifier.kotlin"   
                }
            ]
        },
        "param-modifiers": {
            "patterns": [
                {
                    "match": "\\b(var|val|vararg|lazy|out|ref)\\b",
                    "name": "storage.modifier.kotlin"
                }
            ]
        },
        "variable-modifiers": {
            "patterns": [
                {
                    "match": "\\b(override|open)\\b",
                    "name": "storage.modifier.kotlin"
                }
            ]
        },
        "generic-modifiers": {
            "patterns": [
                {
                    "match": "\\b(out|in)\\b",
                    "name": "storage.modifier.kotlin"
                }
            ]
        },
        "types": {
            "patterns": [
                {
                    "begin": "<",
                    "end": ">",
                    "patterns": [
                        {
                            "include": "#types"
                        }
                    ]
                },
                {
                    "match": "\\b(?:Any|Unit|String|Int|Boolean|Char|Long|Double|Float|Short|Byte|Array)\\b", 
                    "name": "storage.type.buildin.kotlin"
                },
                {
                    "match": "\\b(?:IntArray)\\b", 
                    "name": "storage.type.buildin.array.kotlin"
                },
                {
                    "match": "(->)",
                    "name": "keyword.operator.declaration.kotlin"
                },
                {
                    "begin": "\\(",
                    "end": "\\)",
                    "patterns": [
                    ]
                }
            ]
        },
        "classes": {
            "begin": "(?=\\w?[\\w\\s]*(?:class|object|trait))",
            "end": "}|(?=$)",
            "patterns": [
                {
                    "include": "#scope-modifiers"
                },
                {
                    "include": "#class-modifiers"
                },
                {
                    "captures": {
                        "1": {
                            "name": "keyword.other.kotlin"
                        }, 
                        "2": {
                            "name": "entity.name.type.class.kotlin"
                        }
                    },
                    "match": "(class|object|trait)\\s+(\\w+)"
                },
                {
                    "begin": "<",
                    "end": ">",
                    "patterns": [
                        { 
                            "include": "#generic-modifiers"     
                        },
                        {
                            "match": "\\w+",
                            "name": "storage.type.generic.kotlin"
                        }
                    ]
                },
                {
                    "begin": "\\(", 
                    "end": "\\)", 
                    "patterns": [
                        {
                            "include": "#scope-modifiers"
                        },
                        {
                            "include": "#parameters"
                        }
                    ]
                },
                {
                    "begin": "(:)",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.operator.declaration.kotlin"
                        }
                    },
                    "end": "(?={|$)",
                    "patterns": [
                        {
                            "match": "\\w+",
                            "name": "entity.other.inherited-class.kotlin"
                        },
                        {
                            "begin": "\\(",
                            "end": "\\)",
                            "patterns": [
                                {
                                    "include": "#expressions"
                                }
                            ]
                        }
                    ]
                },
                {
                    "begin": "\\{",
                    "end": "\\}",
                    "patterns": [
                        {
                            "include": "#classes"
                        },
                        {
                            "include": "#functions"
                        },
                        {
                            "include": "#variables" 
                        },
                        { 
                            "include": "#expressions" 
                        }
                    ]
                }
            ]
        },
        "variables": {
            "begin": "(?=\\w?[\\w\\s]*(?:var|val))",
            "end": "(?=$)",
            "patterns": [
                {
                    "include": "#scope-modifiers"
                },
                {
                    "include": "#variable-modifiers"
                },
                {
                    "captures": {
                        "1": { 
                            "name": "keyword.other.kotlin" 
                        },
                        "2": {
                            "name": "variable.language.kotlin"
                        }
                    },
                    "match": "(var|val)\\s+(\\w+)"
                },
                {
                    "begin": "(:)",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.operator.declaration.kotlin"
                        }
                    },
                    "end": "(?=$|=)",
                    "patterns": [
                        {
                            "include": "#types"
                        }
                    ]
                },
                {
                    "begin": "(=)",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.operator.assignment.kotlin"
                        }
                    },
                    "end": "(?=$)",
                    "patterns": [
                        {
                            "include": "#expressions"
                        }
                    ]
                },
                {
                    "match": "get\\(\\)",
                    "name": "keyword.other.kotlin"
                }
            ]
        },
        "functions": {
            "begin": "(?=\\w?[\\w\\s]*(?:fun))",
            "end": "}|(?=$)",
            "patterns": [
                {
                    "include": "#scope-modifiers"
                },
                {
                    "include": "#function-modifiers"
                },
                {
                    "begin": "(fun)",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.other.kotlin"
                        }
                    },
                    "end": "(?=\\()",
                    "patterns": [
                        {
                            "begin": "<",
                            "end": ">",
                            "patterns": [
                                {
                                    "match": "\\w+",
                                    "name": "storage.type.generic.kotlin"
                                }
                            ]
                        },
                        {
                            "captures": {
                                "2": { 
                                    "name": "entity.name.function.kotlin"
                                }
                            },
                            "match": "([\\.\\w]+\\.)?(\\w+)"
                        }
                    ]
                },
                {
                    "begin": "\\(", 
                    "end": "\\)", 
                    "patterns": [
                        {
                            "include": "#parameters"
                        }
                    ]
                },
                {
                    "begin": "(:)",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.operator.declaration.kotlin"
                        }
                    },
                    "end": "(?={|=|$)", 
                    "patterns": [
                        {
                            "include": "#types"
                        }
                    ]
                },
                {
                    "begin": "{", 
                    "end": "(?=})", 
                    "patterns": [
                        {
                            "include": "#variables"
                        },
                        {
                            "include": "#expressions"
                        }
                    ]  
                },
                {
                    "begin": "(=)", 
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.operator.assignment.kotlin"
                        }
                    },
                    "end": "(?=$)", 
                    "patterns": [
                        {
                            "include": "#expressions"
                        }
                    ]  
                }
            ]
        },
        "parameters": {
            "patterns": [
                {
                    "include": "#param-modifiers"
                },
                {
                    "match": "\\w+",
                    "name": "variable.parameter.function.kotlin"
                },
                {
                    "begin": "(:)",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.operator.declaration.kotlin"
                        }
                    },
                    "end": "(?=,|\\)|=)", 
                    "patterns": [
                        {
                            "include": "#types"
                        }
                    ]
                },
                {
                    "begin": "(=)",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.operator.declaration.kotlin"
                        }
                    },
                    "end": "(?=,|\\))",
                    "patterns": [
                        {
                            "include" : "#expressions"
                        }
                    ]
                }
            ]
        },
        "expressions": {
            "patterns": [
                {
                    "begin": "\\(",
                    "end": "\\)",
                    "patterns": [
                        { 
                            "include": "#expressions" 
                        }
                    ]
                },
                {
                    "begin": "\\w<",
                    "end": "\\>\\(",
                    "patterns": [
                        { 
                            "include": "#types" 
                        }, 
                        { 
                            "include": "#expressions" 
                        }
                    ]
                },
                {
                    "include": "#strings"
                },
                {
                    "include": "#constants"
                },
                {
                    "include": "#comments"
                },
                {
                    "include": "#keywords"
                }
            ]
        },
        "strings": {
            "patterns": [
                {
                    "begin": "\"", 
                    "beginCaptures": {
                        "0": {
                            "name": "punctuation.definition.string.begin.kotlin"
                        }
                    }, 
                    "end": "\"", 
                    "endCaptures": {
                        "0": {
                            "name": "punctuation.definition.string.end.kotlin"
                        }
                    }, 
                    "name": "string.quoted.double.kotlin", 
                    "patterns": [
                        {
                            "match": "(\\$\\w+|\\$\\{[^\\}]+\\})",
                            "name": "variable.parameter.template.kotlin"
                        },
                        {
                            "match": "\\\\.", 
                            "name": "constant.character.escape.kotlin"
                        }
                    ]
                }, 
                {
                    "begin": "'", 
                    "beginCaptures": {
                        "0": {
                            "name": "punctuation.definition.string.begin.kotlin"
                        }
                    }, 
                    "end": "'", 
                    "endCaptures": {
                        "0": {
                            "name": "punctuation.definition.string.end.kotlin"
                        }
                    }, 
                    "name": "string.quoted.single.kotlin", 
                    "patterns": [
                        {
                            "match": "\\\\.", 
                            "name": "constant.character.escape.kotlin"
                        }
                    ]
                },
                {
                    "begin": "`", 
                    "beginCaptures": {
                        "0": {
                            "name": "punctuation.definition.string.begin.kotlin"
                        }
                    }, 
                    "end": "`", 
                    "endCaptures": {
                        "0": {
                            "name": "punctuation.definition.string.end.kotlin"
                        }
                    }, 
                    "name": "string.quoted.single.kotlin"
                }
            ]
        },
        "constants": {
            "patterns": [
                {
                    "match": "\\b(true|false|null)\\b", 
                    "name": "constant.language.kotlin"
                }, 
                {
                    "match": "\\b(this|super)\\b", 
                    "name": "variable.language.kotlin"
                }, 
                {
                    "match": "\\b((0(x|X)[0-9a-fA-F]*)|(([0-9]+\\.?[0-9]*)|(\\.[0-9]+))((e|E)(\\+|-)?[0-9]+)?)([LlFfUuDd]|UL|ul)?\\b", 
                    "name": "constant.numeric.kotlin"
                }
            ]
        },
        "keywords": {
            "patterns": [
                {
                    "match": "\\b(var|val)\\b", 
                    "name": "keyword.operator.assignment.kotlin"
                },
                {
                    "match": "\\b(try|catch|finally|throw)\\b", 
                    "name": "keyword.control.catch-exception.kotlin"
                },
                {
                    "match": "\\b(if|then|else|while|for|do|return|when)\\b", 
                    "name": "keyword.control.kotlin"
                },
                {
                    "match": "\\b(in|is|as)\\b", 
                    "name": "keyword.operator.kotlin"
                },
                {
                    "match": "(==|!=|<=|>=|<>|<|>)", 
                    "name": "keyword.operator.comparison.kotlin"
                }, 
                {
                    "match": "(=)", 
                    "name": "keyword.operator.assignment.kotlin"
                },
                {
                    "match": "(:)", 
                    "name": "keyword.operator.declaration.kotlin"
                },
                {
                    "match": "(\\.)", 
                    "name": "keyword.operator.dot.kotlin"
                }, 
                {
                    "match": "(\\-\\-|\\+\\+)", 
                    "name": "keyword.operator.increment-decrement.kotlin"
                }, 
                {
                    "match": "(\\-|\\+|\\*|\\/|%)", 
                    "name": "keyword.operator.arithmetic.kotlin"
                }, 
                {
                    "match": "(!|&&|\\|\\|)", 
                    "name": "keyword.operator.logical.kotlin"
                }, 
                {
                    "match": ";", 
                    "name": "punctuation.terminator.kotlin"
                }
            ]
        }
    },
    "uuid": "d508c059-a938-4779-b2bc-ff43a5078907"
}